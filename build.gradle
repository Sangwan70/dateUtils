/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2')
    }
}

dependencies {
    implementation 'joda-time:joda-time:2.5'
    implementation 'log4j:log4j:1.2.17'
    testImplementation 'junit:junit:4.11'
}

group = 'com.theskillpedia.core.utils'
version = '1.0-SNAPSHOT'
description = 'dateUtils'
sourceCompatibility = '1.7'

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

// copy dependency jars to build/libs/dependency-jars 
task copyJarsToLib (type: Copy) {
    def toDir = "build/libs/dependency-jars"

    // create directories, if not already done:
    file(toDir).mkdirs()

    // copy jars to lib folder:
    from configurations.compile
    into toDir
}
jar {
    // exclude log properties (recommended)
    exclude ("log4j.properties")

    manifest {
        attributes (
            'Main-Class': 'com.theskillpedia.core.utils.App',
    //       "Class-Path": '. dependency-jars/' + configurations.compile.collect { it.getName() }.join(' dependency-jars/')
            )
    }
}

// always call copyJarsToLib when building jars:
jar.dependsOn copyJarsToLib
